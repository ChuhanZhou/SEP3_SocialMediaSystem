@page "/Profile"
@using SEP3_Client.Data
@using SEP3_Client.Model.Unit.User
@inject NavigationManager NavigationManager
@inject IClientModel ClientModel
<div style="float: left; width: 100%;height: auto;">
    <div style="text-align: center;
         width: 800px;
         height: 800px;
         margin: auto;
         ">
        <div >
            <button class="oi oi-cog" style="float: right;width: auto;height: auto;display: inline-block;" @onclick="Setting">
            </button>
        </div>
        <h1 style="text-shadow: 2px 2px 5px #818182; color: #4e555b">Profile</h1>
        
        <div style="background: #b9bbbe">
            <span class="oi oi-person" style="float: inherit;width:600px;height: 50px;color: white;
                                           font-size: xx-large;line-height:50px;text-align: center"></span><br/>
            <label style="font-size: 25px">@username</label>
        </div>
        <div style="height: 8px"></div>
        <div style="float: left; width: 800px;height: auto;">
            <div style="border: 2px solid black;
                      border-radius: 8px;width: 500px;padding: 10px;height: auto;text-align: center;margin: auto">
                <div style="font-size: 25px;text-align: left">
                    Basic Information
                    <button class="btn btn-outline-dark" style="float: right; width:auto;border-radius: 20px" type="submit" @onclick="clickEDIT">Edit</button>
                </div>
                <div style="font-size: 20px;">
                    <span class="oi oi-sun" style="float: left">Account : @accountId</span><br/>
                    @if (day == 0 || month == 0)
                    {
                        <div class="oi oi-calendar" style="float: left">Birth of date: Not set... </div><br/>
                    }
                    else
                    {
                        <div class="oi oi-calendar" style="float: left">Birth of date: @day / @month </div><br/>
                    }
                    <div class="oi oi-star" style="float: left;">Gender:  @gender </div><br/>
                                        <div class="oi oi-home" style="float: left">Hometown : @hometown</div><br/>
                    <div class="oi oi-phone" style="float: left">TelNo. : @telNo</div><br/>
                    
                </div>
            </div>
            <div style="height: 8px"></div>
            <div style="border: 2px solid black;
                         border-radius: 8px;width: 500px;padding: 10px;height: auto;text-align: center;margin: auto">
                <div style="font-size: 25px;text-align: left">
                    Posts
                    <button class="btn btn-outline-dark" style="float: right; width:auto;border-radius: 20px" type="submit" >View</button>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private string username;
    private string accountId;
    private string password;
    private int month;
    private int day;
    private char gender;
    private string hometown;
    private long telNo;

    protected override async Task OnInitializedAsync()
    {
        Account account = ClientModel.GetAccount().Copy();
        accountId = account.GetId();
        username = account.GetUserName();
        if (account.Birthday==null)
        {
            month = 0;
            day = 0;
        }
        else
        {
            month = account.Birthday.GetMonth();
             day = account.Birthday.GetDay();
        }
        gender = 'M';
        if (account.GetHomeTown()==null)
        {
            hometown = "No hometown to show";
        }
        else
        {
            hometown = account.GetHomeTown();
        }
        if (account.GetPhoneNumber()==0)
        {
            telNo = 0;
        }
        else
        {
            telNo = account.GetPhoneNumber();
        }
        
        
    }
    
    private void clickEDIT()
    {
        NavigationManager.NavigateTo("/EditProfile");
    }
    
    private void Setting()
    {
        NavigationManager.NavigateTo("/Setting");
    }

}